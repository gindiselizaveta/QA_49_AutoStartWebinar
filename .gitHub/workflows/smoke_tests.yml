name: Smoke tests

on:
  push:
    branches: [ "main" ]

    jobs:
      test:
        runs-on: windows-latest
        permissions:
          contents: read
        steps:
          - name: Checkout repo
            uses: actions/checkout@v4
          - name: Set up JDK 17
            uses: actions/setup-java@v4
            with:
              java-version: '17'
              distribution: 'temurin'
          - name: Install chrome
            uses: browser-actions/setup-chrome@latest
          - name: Setup Gradle
            uses: gradle/actions/setup-gradle@v4
          - name: Build with Gradle Wrapper
            run: ./gradlew clear smoketests
          - name: Store reports
            if: failed()
            uses: actions/upload-artifact@v4
            with:
              name: reports
              path:
                /build/reports
                /build/test-results/